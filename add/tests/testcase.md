# 仕様

※単体テスト仕様と設計上の仕様を兼任するメモとする。

## テスト化しない仕様

- 送信機の機能は，ボタン読み込み（上下左右に対応する4つ）と送信（赤外線LEDのOUTPUT, 10個のLED全てで共通の信号を送信）とする。
- 受信機の機能は，受信，モータ制御（サーボモータは制御2つ分，直流モータ制御1つ）とする。
- GPIOのOUTPUTのON-OFF，toggleは，IDEが生成する，ドライバーに相当するマクロ関数を使用する。
- 直流モータの制御はトランジスタによる電気式スイッチへPWMで送ることとし，直流モータは電源から直接動力を得るとする。

## テスト化する仕様

### 共通

#### 完了済み

- LEDがON-OFFできる。

#### 未完了

- LED 10個で同時に点灯することができる。
- 

- タイマ割り込み時間の100倍の時間を，基準周期とする。基準周期のONの時間とOFFの時間はそれぞれタイマ割り込みの4倍の時間とし，その後の信号が，モータ制御信号とする。
- モータ制御信号は，3種類のモータに対応する信号を重畳した信号を送信する。
- モータ制御信号は，1つめのON→OFFの後の時間の長さがch1の信号，2つめのON→OFFの後の時間の長さがch2の信号，3つめのON→OFFの後の時間の長さがch3の信号とする。4つ目のON→OFFは，ch3の信号の終了を識別するために使用する。それぞれ，ONの時間はタイマ割り込み時間の2倍とする。

### 受信機のみ


#### 完了済み

#### 未完了

- 周期OOでセンサ値を読み込む(タイマ割り込み)。
- 過去10回のセンサ値を，配列として先入先出で保持する。
- モータ制御信号を解析し，モータ設定値変数を更新する。
- モータ設定値変数を元に，常にモータに指令信号を送り続ける。（ポーリング処理）
- モータのうち，サーボモータはPWM制御で角度を制御することとする。
- モータのうち，直流モータはPWM制御で電圧を制御することとする。

### 送信器のみ

#### 完了済み

#### 未完了


- LEDをON-OFFする。
- 上下左右に対応するボタンの入力を，外部割込みとして認識する。
- ボタン入力があると，その回数によって上下方向変数および左右方向変数の値を更新する。